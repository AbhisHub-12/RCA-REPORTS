<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCA Report - Capillary - Last 30 days</title>
    <style>
        body { font-family: -apple-system, Arial, sans-serif; margin: 0; background: #f8f9fa; }
        
        .header { 
            background: linear-gradient(135deg, #7c3aed 0%, #14b8a6 100%); 
            color: white; 
            padding: 25px 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .logo-text {
            font-size: 2rem;
            font-weight: bold;
            display: flex;
            align-items: baseline;
        }
        
        .logo-dot { color: #14b8a6; font-size: 2.5rem; margin: 0 2px; }
        .logo-cloud { color: #14b8a6; }
        
        .divider {
            width: 2px;
            height: 40px;
            background: rgba(255,255,255,0.3);
        }
        
        .report-title {
            font-size: 1.5rem;
            font-weight: 300;
        }
        
        .header-right { display: flex; align-items: center; gap: 40px; }
        .date-info { font-size: 0.95rem; opacity: 0.9; }
        .stats { display: flex; gap: 30px; }
        .stat { text-align: center; }
        .stat-number { font-size: 1.8rem; font-weight: bold; color: #14b8a6; }
        .stat-label { font-size: 0.75rem; opacity: 0.85; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }
        
        .ai-badge {
            background: #10b981;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 10px;
        }
        
        .search-section {
            background: white;
            padding: 25px;
            margin: 30px auto;
            max-width: 1400px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .search-container { display: flex; gap: 15px; align-items: center; }
        .search-input { 
            flex: 1; 
            padding: 12px 20px; 
            border: 2px solid #e2e8f0; 
            border-radius: 8px; 
            font-size: 1rem; 
            outline: none; 
        }
        .search-input:focus { 
            border-color: #7c3aed; 
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1); 
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px 40px; }
        .customer-section { 
            background: white; 
            margin: 20px 0; 
            border-radius: 12px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.08); 
            overflow: hidden; 
        }
        
        table { width: 100%; border-collapse: collapse; table-layout: auto; word-wrap: break-word; }
        th { 
            background: #fafafa; 
            padding: 12px 15px; 
            text-align: left; 
            font-size: 0.85rem; 
            color: #6b7280; 
            font-weight: 600; 
            text-transform: uppercase; 
            letter-spacing: 0.5px; 
        }
        td { 
            padding: 14px 15px; 
            border-bottom: 1px solid #f3f4f6; 
            color: #374151; 
        }
        
        tr.expandable { cursor: pointer; }
        tr.expandable:hover td { background: #f9fafb; }
        
        .expand-indicator { 
            display: inline-block; 
            margin-right: 8px; 
            transition: transform 0.3s; 
            color: #7c3aed; 
        }
        tr.expanded .expand-indicator { transform: rotate(90deg); }
        
        .status { 
            padding: 5px 10px; 
            border-radius: 6px; 
            font-size: 0.8rem; 
            font-weight: 500; 
        }
        .status-complete { background: #d1fae5; color: #065f46; }
        .status-open { background: #fef3c7; color: #92400e; }
        .status-progress { background: #dbeafe; color: #1e40af; }
        .status-default { background: #f3f4f6; color: #6b7280; }
        
        
        .ai-error-box {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 12px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 0.95rem;
        }
        
        .slack-indicator {
            display: inline-block;
            padding: 3px 8px;
            background: #4a1d96;
            color: white;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 8px;
        }
        
        /* Clean Code Block Styling */
        .code-block-wrapper {
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            background: #ffffff;
            max-width: 100%;
            width: 100%;
            box-sizing: border-box;
        }

        .code-header {
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            color: #f9fafb;
            padding: 12px 20px;
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #6b7280;
        }

        .code-block {
            margin: 0;
            padding: 20px;
            background: #1f2937;
            overflow: hidden;
            max-width: 100%;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .code-block code {
            color: #f3f4f6;
            font-family: 'SF Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-break: break-all;
            overflow-wrap: break-word;
            display: block;
            max-width: 100%;
        }

        /* Clean Inline Code */
        .inline-code {
            background: #fef2f2;
            color: #dc2626;
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'SF Mono', 'Consolas', monospace;
            font-size: 0.9em;
            font-weight: 600;
            white-space: nowrap;
            border: 1px solid #fecaca;
        }

        /* Link Styles */
        .markdown-link {
            color: #2563eb;
            text-decoration: none;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 4px;
            background: #eff6ff;
            border: 1px solid #dbeafe;
            transition: all 0.2s;
            display: inline-block;
        }

        .markdown-link:hover {
            color: #1d4ed8;
            background: #dbeafe;
            border-color: #2563eb;
            transform: translateY(-1px);
        }

        .auto-link {
            color: #7c3aed;
            text-decoration: none;
            font-size: 0.95em;
            word-break: break-all;
            padding: 3px 6px;
            border-radius: 4px;
            background: #f3e8ff;
            border: 1px solid #d8b4fe;
        }

        .auto-link:hover {
            color: #5b21b6;
            background: #e9d5ff;
        }

        /* RCA Content Box */
        .rca-content-box {
            padding: 16px;
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            border-radius: 8px;
            font-size: 0.95rem;
            line-height: 1.7;
            color: #1f2937;
            min-height: 60px;
        }

        .rca-content-box .code-block-wrapper {
            margin: 16px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .rca-empty {
            color: #9ca3af;
            font-style: italic;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            border: 2px dashed #e5e7eb;
            border-radius: 6px;
        }

        /* Original pre styling for non-code blocks */
        pre {
            background: linear-gradient(135deg, #f8f9fa 0%, #f1f3f4 100%);
            border: 1px solid #d1d5db;
            border-left: 4px solid #7c3aed;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            overflow-x: auto;
            font-size: 0.85rem;
            line-height: 1.5;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }
        
        /* Clean code blocks without content labels */
        
        code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            background: #e5e7eb;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #dc2626;
            font-weight: 500;
        }
        
        pre code {
            background: none;
            padding: 0;
            border-radius: 0;
            color: #1f2937;
            font-weight: 400;
            display: block;
            margin-top: 8px;
        }
        
        /* Enhanced syntax highlighting */
        .language-bash code,
        .language-shell code,
        .language-console code {
            color: #059669;
            font-weight: 500;
        }
        
        .language-log code,
        .language-text code {
            color: #374151;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .language-json code {
            color: #0891b2;
        }
        
        .language-yaml code,
        .language-yml code {
            color: #ea580c;
        }
        
        /* Download Button Styling */
        .download-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .download-btn, .share-btn {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 120px;
        }

        .share-btn {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
            background: linear-gradient(135deg, #6d28d9 0%, #9333ea 100%);
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        
        .download-icon {
            font-size: 1.1rem;
        }
        
        
        /* Comprehensive Print Styles for PDF Generation */
        @media print {
            /* Page setup for proper PDF sizing */
            @page {
                size: A4;
                margin: 10mm 15mm 10mm 15mm;
            }
            
            /* CRITICAL: Force all hidden content to show when printing */
            * {
                overflow: visible !important;
            }
            
            /* Reset body for print */
            body {
                margin: 0;
                padding: 0;
                font-size: 10pt !important;
                line-height: 1.3 !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            /* Scale down the entire content to fit */
            .header {
                padding: 15px 20px !important;
                page-break-after: avoid;
                break-after: avoid;
            }
            
            .header-content {
                max-width: 100% !important;
                font-size: 0.9em !important;
            }
            
            .logo-text {
                font-size: 1.3rem !important;
            }
            
            .report-title {
                font-size: 1.1rem !important;
            }
            
            .stat-number {
                font-size: 1.3rem !important;
            }
            
            /* Hide interactive elements */
            .download-container,
            .search-section {
                display: none !important;
            }
            
            /* Adjust container for print */
            .container {
                max-width: 100% !important;
                padding: 10px !important;
                margin: 0 !important;
            }
            
            /* Ensure tables fit on page */
            .customer-section {
                page-break-inside: avoid;
                break-inside: avoid;
                margin: 10px 0 !important;
            }
            
            table {
                width: 100% !important;
                font-size: 0.85em !important;
            }
            
            th, td {
                padding: 8px 10px !important;
                font-size: 0.85em !important;
            }
            
            /* Force all ticket details to be visible when printing */
            tr[id^="details_"] {
                display: table-row !important;
                visibility: visible !important;
                opacity: 1 !important;
                page-break-inside: avoid;
            }
            
            /* Override any inline styles */
            tr[style*="display: none"] {
                display: table-row !important;
            }
            
            /* Adjust expanded content for print */
            tr[id^="details_"] > td > div {
                padding: 15px 30px !important;
            }
            
            /* Make code blocks smaller but readable */
            pre {
                padding: 10px !important;
                margin: 8px 0 !important;
                font-size: 0.75em !important;
                page-break-inside: avoid;
                max-width: 100% !important;
                overflow: visible !important;
                white-space: pre-wrap !important;
                word-wrap: break-word !important;
            }
            
            pre code {
                font-size: 0.85em !important;
                white-space: pre-wrap !important;
                word-break: break-word !important;
            }
            
            /* Ensure all sections and content are visible */
            .expand-indicator {
                display: none !important;
            }
            
            /* Force all collapsed content to be visible */
            [style*="display: none"],
            [style*="display:none"] {
                display: block !important;
            }
            
            /* Ensure detail rows are visible */
            tr[id*="details"] {
                display: table-row !important;
            }
            
            /* Make sure all RCA content sections are visible */
            div[style*="background: #f9fafb"] {
                display: block !important;
                visibility: visible !important;
            }
            
            /* Adjust section headers */
            h2 {
                font-size: 1.2em !important;
                margin: 10px 0 !important;
                page-break-after: avoid;
            }
            
            h4 {
                font-size: 1em !important;
                margin: 8px 0 !important;
                page-break-after: avoid;
            }
            
            /* Ensure content boxes fit */
            div[style*="padding: 12px"] {
                padding: 8px !important;
                margin: 5px 0 !important;
            }
            
            /* Prevent page breaks in critical areas */
            .customer-section > div:first-child,
            .customer-section table {
                page-break-after: avoid;
            }
            
            /* Scale down any oversized content */
            * {
                max-width: 100% !important;
            }
            
            /* Ensure background colors print */
            .status,
            .ai-badge,
            pre {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
        
        /* Special styling for error logs */
        pre:has(code:contains("error")),
        pre:has(code:contains("Error")),
        pre:has(code:contains("GRPC error")) {
            border-left-color: #dc2626;
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
        }
        
        /* Removed error log labels */
        
        /* Special styling for mount/config logs */
        pre:has(code:contains("mount")),
        pre:has(code:contains("Mount")) {
            border-left-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }
        
        /* Removed mount log labels */
        
        /* Special styling for Java/JVM parameters */
        pre:has(code:contains("-server")),
        pre:has(code:contains("-Xms")) {
            border-left-color: #7c3aed;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        }
        
        /* Removed Java config labels */

        /* Image Viewer Modal Styles */
        .image-viewer-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            cursor: pointer;
        }

        .image-viewer-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 95vw;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .image-viewer-image {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .image-viewer-title {
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 12px 20px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 1rem;
            font-weight: 500;
            text-align: center;
        }

        .image-viewer-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10001;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .image-viewer-close:hover {
            background: rgba(0, 0, 0, 0.8);
        }

    </style>
</head>
<body>
    <!-- Download and Share Buttons -->
    <div class="download-container">
        <button class="download-btn" id="printBtn" title="Print / Save as PDF">
            <span class="download-icon">üñ®Ô∏è</span>
            <span>Print</span>
        </button>
        <button class="share-btn" id="shareReportBtn" title="Share Report Link">
            <span class="share-icon">üîó</span>
            <span>Share Link</span>
        </button>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
                                background:rgba(0,0,0,0.5); z-index:10000;">
        <div style="background:white; border-radius:12px; padding:25px; max-width:500px;
                    width:90%; max-height:80vh; overflow:auto; position:fixed;
                    top:50%; left:50%; transform:translate(-50%, -50%);">
            <button id="closeModalBtn"
                    style="position:absolute; top:15px; right:15px; background:none;
                           border:none; font-size:24px; cursor:pointer; color:#6b7280;">√ó</button>
            <h3 style="margin:0 0 20px 0; color:#374151;">Share RCA Report</h3>

            <div style="margin-bottom:20px;">
                <label style="display:block; margin-bottom:8px; color:#6b7280; font-size:14px;">Report Link:</label>
                <div style="display:flex; gap:10px;">
                    <input id="shareUrl" type="text" readonly
                           style="flex:1; padding:10px; border:1px solid #e5e7eb; border-radius:6px;
                                  background:#f9fafb; font-family:monospace; font-size:13px;">
                    <button id="copyLinkBtn"
                            style="padding:10px 20px; background:#7c3aed; color:white;
                                   border:none; border-radius:6px; cursor:pointer;
                                   font-weight:500; white-space:nowrap;">
                        Copy Link
                    </button>
                </div>
                <div id="copySuccess" style="margin-top:10px; color:#10b981; font-size:14px; display:none;">
                    ‚úÖ Link copied to clipboard!
                </div>
            </div>

            <div style="margin-bottom:20px;">
                <label style="display:block; margin-bottom:12px; color:#6b7280; font-size:14px;">Quick Share:</label>
                <div style="display:grid; grid-template-columns:repeat(2, 1fr); gap:10px;">
                    <button id="shareEmailBtn"
                            style="padding:12px; background:#f3f4f6; border:1px solid #e5e7eb;
                                   border-radius:6px; cursor:pointer; display:flex; align-items:center;
                                   justify-content:center; gap:8px; transition:background 0.2s;">
                        <span>üìß</span> Email
                    </button>
                    <button id="shareSlackBtn"
                            style="padding:12px; background:#f3f4f6; border:1px solid #e5e7eb;
                                   border-radius:6px; cursor:pointer; display:flex; align-items:center;
                                   justify-content:center; gap:8px; transition:background 0.2s;">
                        <span>üí¨</span> Slack
                    </button>
                    <button id="shareTeamsBtn"
                            style="padding:12px; background:#f3f4f6; border:1px solid #e5e7eb;
                                   border-radius:6px; cursor:pointer; display:flex; align-items:center;
                                   justify-content:center; gap:8px; transition:background 0.2s;">
                        <span>üë•</span> Teams
                    </button>
                    <button id="shareWhatsAppBtn"
                            style="padding:12px; background:#f3f4f6; border:1px solid #e5e7eb;
                                   border-radius:6px; cursor:pointer; display:flex; align-items:center;
                                   justify-content:center; gap:8px; transition:background 0.2s;">
                        <span>üí¨</span> WhatsApp
                    </button>
                </div>
            </div>

            <div id="backupSection" style="margin-bottom:20px;">
                <label style="display:block; margin-bottom:8px; color:#6b7280; font-size:14px;">Alternative Link (HTML Preview):</label>
                <div style="display:flex; gap:10px;">
                    <input id="shareUrlBackup" type="text" readonly
                           style="flex:1; padding:10px; border:1px solid #e5e7eb; border-radius:6px;
                                  background:#f9fafb; font-family:monospace; font-size:13px;">
                    <button id="copyBackupLinkBtn"
                            style="padding:10px 20px; background:#059669; color:white;
                                   border:none; border-radius:6px; cursor:pointer;
                                   font-weight:500; white-space:nowrap;">
                        Copy Backup
                    </button>
                </div>
                <div style="margin-top:5px; color:#059669; font-size:12px;">
                    ‚úÖ This link works reliably for customer sharing
                </div>
            </div>

            <div style="padding:15px; background:#f0f9ff; border:1px solid #bae6fd;
                        border-radius:6px; margin-top:20px;">
                <p style="margin:0; color:#0369a1; font-size:14px; line-height:1.5;">
                    üí° <strong>Tip:</strong> This report can be opened directly in any browser.
                    The recipient will see the full interactive report with all features.
                </p>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="imageViewerModal" class="image-viewer-modal" onclick="closeImageViewer()">
        <div class="image-viewer-close" onclick="closeImageViewer()">&times;</div>
        <div class="image-viewer-content" onclick="event.stopPropagation()">
            <img id="imageViewerImage" class="image-viewer-image" src="" alt="">
            <div id="imageViewerTitle" class="image-viewer-title"></div>
        </div>
    </div>

    <div class="header">
        <div class="header-content">
            <div class="header-left">
                <div class="logo-section">
                    <div class="logo-text">
                        <span style="color: white;">Facets</span>
                        <span class="logo-dot">.</span>
                        <span class="logo-cloud">cloud</span>
                    </div>
                    <div class="divider"></div>
                    <div class="report-title">
                        RCA Report
                        <span class="ai-badge">‚ú® AI Enhanced</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div>
                    <div class="date-info">üìÖ Sep 09 - Oct 09, 2025</div>
                    <div class="date-info" style="margin-top: 5px;">Capillary - Last 30 days</div>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number">17</div>
                        <div class="stat-label">Total Tickets</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">1</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="search-section">
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput"
                   placeholder="Search by ticket title, customer name, or status...">
            <button class="search-btn" id="searchBtn"
                    style="background: #7c3aed; color: white; padding: 12px 30px;
                           border: none; border-radius: 8px; cursor: pointer; margin: 0 5px;">
                üîç Search
            </button>
            <button class="clear-btn" id="clearBtn"
                    style="background: #dc2626; color: white; padding: 12px 30px;
                           border: none; border-radius: 8px; cursor: pointer; margin: 0 5px;">
                üîÑ Clear
            </button>
        </div>
    </div>
    
    <div class="container">
        <div class="customer-section">
            <div style="background: linear-gradient(135deg, #f8f9fa 0%, #f3f4f6 100%); 
                        padding: 20px 25px; display: flex; justify-content: space-between; align-items: center;">
                <h2>Capillary</h2>
                <span style="background: #14b8a6; color: white; padding: 6px 14px; 
                           border-radius: 20px; font-size: 0.85rem; font-weight: 500;">
                    17 tickets
                </span>
            </div>
            <table>
                <tr>
                    <th width="50">#</th>
                    <th>Title</th>
                    <th width="120">ClickUp</th>
                    <th width="100">Date</th>
                    <th width="120">Status</th>
                    <th width="150">Owner</th>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_1">
                    <td><span class="expand-indicator">‚ñ∂</span> 1</td>
                    <td>Error creating subscription<span class="slack-indicator">Slack Thread</span></td>
                    <td><a href="https://app.clickup.com/t/86d0jq5yb" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-09</td>
                    <td><span class="status status-open">Open</span></td>
                    <td>Unassigned</td>
                </tr>
                <tr id="details_Capillary_1" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-09</div>
                                <div><strong>Status:</strong><br>Open</div>
                                <div><strong>Owner:</strong><br>Unassigned</div>
                                <div><strong>ClickUp ID:</strong><br>86d0jq5yb</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, encountered an issue while attempting to create a subscription for a new Slack channel via the user interface. The expected outcome was the successful creation of the subscription, but the process failed, preventing the subscription from being established. This issue was reported by Kishan Kumar on October 9th, 2023, at 14:28. The problem was significant as it hindered the integration of Slack channels, which could impact communication workflows. The environment involved was likely related to Slack's API or integration services, although specific technical details were not provided in the conversation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. On October 9th, 2023, at 14:28, Kishan Kumar reported the issue in the Slack channel, stating that they were unable to create a subscription for a new Slack channel via the UI.<br><br>

2. At 14:59, Nachiket Warhade suggested getting on a call to debug the issue further, indicating a need for real-time troubleshooting to understand the problem better.<br><br>

3. The conversation did not include specific technical commands or logs, but the suggestion to have a call implies that the team intended to perform live debugging, possibly involving checking Slack API responses or UI logs to identify the root cause.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. The resolution steps were not explicitly documented in the conversation. Nachiket Warhade's suggestion to have a call indicates that the team planned to discuss and troubleshoot the issue in real-time, potentially involving checking Slack API configurations or UI settings.<br><br>

2. Since the ticket status remains open, it suggests that the resolution is pending further investigation or confirmation from the customer after the debugging session.<br><br>

3. The customer may need to verify any changes or fixes applied during the call, but this was not confirmed in the conversation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The root cause of the issue appears to be related to the inability to create a subscription for a new Slack channel via the UI. The exact technical cause was not identified in the conversation, as the debugging process was suggested to occur over a call. Potential causes could include misconfigurations in the Slack API settings or issues within the UI itself. Further investigation is needed to confirm the exact cause, as the conversation did not provide definitive evidence or logs to pinpoint the issue.<br><br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üí¨ Slack Thread Images</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://files.slack.com/files-pri/T0188PWDTJA-F09KDR6CVHR/image.png" alt="image.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://files.slack.com/files-pri/T0188PWDTJA-F09KDR6CVHR/image.png', 'image.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image.png</div>
                                            <div style="color: #6b7280; font-size: 0.8rem; margin-bottom: 4px;">By: Unknown</div>
                                            <a href="https://files.slack.com/files-pri/T0188PWDTJA-F09KDR6CVHR/image.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_2">
                    <td><span class="expand-indicator">‚ñ∂</span> 2</td>
                    <td>Inconsistencies in user management (deployer access and cc ui access)</td>
                    <td><a href="https://app.clickup.com/t/86d0hw6t0" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-07</td>
                    <td><span class="status status-default">pr raised</span></td>
                    <td>Samarthya Gupta</td>
                </tr>
                <tr id="details_Capillary_2" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-07</div>
                                <div><strong>Status:</strong><br>pr raised</div>
                                <div><strong>Owner:</strong><br>Samarthya Gupta</div>
                                <div><strong>ClickUp ID:</strong><br>86d0hw6t0</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, reported inconsistencies in user management related to deployer access and CC UI access. The expected behavior was seamless access management, but issues arose, potentially affecting user operations. The environment involved was likely a cloud-based infrastructure managed by the customer. The issue was marked as urgent, indicating a significant impact on operations. Samarthya Gupta indicated a fix was added and planned for deployment, suggesting a technical resolution was in progress.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Prashant Dhanke initiated the investigation by tagging Shashwat Pathak and Nachiket Warhade to check the issue, indicating a need for further analysis by the team.<br><br>

2. Samarthya Gupta acknowledged the issue and stated, "I have added a fix for this, and I will deploy it today," suggesting that a potential solution was identified and prepared for deployment.<br><br>

3. Ashish Kumar requested confirmation of the deployment and asked for details on the issue, indicating a need for understanding the root cause and ensuring the fix's effectiveness.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Samarthya Gupta confirmed that a fix was added and planned for deployment, indicating that the technical solution was ready to be implemented.<br><br>

2. Ashish Kumar requested notification upon deployment and further clarification on the issue, suggesting a follow-up to ensure the fix resolves the problem effectively.<br><br>

3. The resolution status is pending confirmation of deployment and effectiveness, as no further updates were provided in the conversation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the inconsistencies in user management appears to be a technical issue within the access management system, which Samarthya Gupta addressed by adding a fix. The exact nature of the issue was not detailed in the conversation, but the deployment of a fix suggests it was identified and resolved at a technical level. Further investigation or confirmation is needed to ensure the fix fully resolves the inconsistencies.<br><br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/9130cec0-3817-4030-a59b-995b9cf1f4f2/Screenshot%202025-10-07%20at%2012.56.05%E2%80%AFPM.png" alt="Screenshot 2025-10-07 at 12.56.05‚ÄØPM.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/9130cec0-3817-4030-a59b-995b9cf1f4f2/Screenshot%202025-10-07%20at%2012.56.05%E2%80%AFPM.png', 'Screenshot 2025-10-07 at 12.56.05‚ÄØPM.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">Screenshot 2025-10-07 at 12.56.05‚ÄØPM.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/9130cec0-3817-4030-a59b-995b9cf1f4f2/Screenshot%202025-10-07%20at%2012.56.05%E2%80%AFPM.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/0025c2d2-9c74-4b49-aa83-18aa4da167d1/Screenshot%202025-10-07%20at%2012.31.56%E2%80%AFPM.png" alt="Screenshot 2025-10-07 at 12.31.56‚ÄØPM.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/0025c2d2-9c74-4b49-aa83-18aa4da167d1/Screenshot%202025-10-07%20at%2012.31.56%E2%80%AFPM.png', 'Screenshot 2025-10-07 at 12.31.56‚ÄØPM.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">Screenshot 2025-10-07 at 12.31.56‚ÄØPM.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/0025c2d2-9c74-4b49-aa83-18aa4da167d1/Screenshot%202025-10-07%20at%2012.31.56%E2%80%AFPM.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_3">
                    <td><span class="expand-indicator">‚ñ∂</span> 3</td>
                    <td>Access Forbidden For Release in USHC</td>
                    <td><a href="https://app.clickup.com/t/86d0hhvq5" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-06</td>
                    <td><span class="status status-default">needs customer response</span></td>
                    <td>Samarthya Gupta</td>
                </tr>
                <tr id="details_Capillary_3" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-06</div>
                                <div><strong>Status:</strong><br>needs customer response</div>
                                <div><strong>Owner:</strong><br>Samarthya Gupta</div>
                                <div><strong>ClickUp ID:</strong><br>86d0hhvq5</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to perform a release in the USHC environment but encountered an access issue. The expected outcome was a successful release process, but instead, they faced a 'Forbidden' error, indicating insufficient permissions. This issue was critical as it blocked the release process, impacting the deployment timeline. The environment involved was the USHC CRM, and the error suggested a permissions-related problem, potentially linked to user access levels.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Samarthya Gupta initiated the investigation by checking the access levels of users involved in the USHC CRM environment. He noted that Ambar had viewer access, which might not be sufficient for the release process.<br><br>

2. Samarthya Gupta asked for the ID of another person involved to verify their access level:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>What is the ID of the other person?</code></pre>
</div>
   This step was crucial to determine if the access issue was due to insufficient permissions for the involved personnel.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. It was suggested that the access levels of the involved users be reviewed and adjusted to ensure they have the necessary permissions for the release process. This would involve granting higher access levels, such as editor or admin, to facilitate the release.<br><br>

2. Customer was advised to verify and update the permissions for the users involved in the release process to resolve the 'Forbidden' error. This step was necessary to ensure that all users have the appropriate access rights to perform the release operations.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue was insufficient permissions for the users involved in the release process within the USHC CRM environment. The investigation revealed that Ambar only had viewer access, which is inadequate for executing a release. This permissions issue prevented the necessary actions from being performed, resulting in the 'Forbidden' error. Further investigation into the access levels of all involved personnel was needed to confirm and rectify the permissions setup.<br><br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_4">
                    <td><span class="expand-indicator">‚ñ∂</span> 4</td>
                    <td>Kubernetes Upgrade Feasibility and Timeline</td>
                    <td><a href="https://app.clickup.com/t/86d0hd6rb" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-06</td>
                    <td><span class="status status-open">Open</span></td>
                    <td>Unassigned</td>
                </tr>
                <tr id="details_Capillary_4" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-06</div>
                                <div><strong>Status:</strong><br>Open</div>
                                <div><strong>Owner:</strong><br>Unassigned</div>
                                <div><strong>ClickUp ID:</strong><br>86d0hd6rb</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, is inquiring about the feasibility and timeline for a Kubernetes upgrade, as their current setup is expiring in November. The expectation was to receive a detailed timeline and plan for the upgrade process. However, the conversation indicates that the timeline has not yet been provided, and further investigation or planning is required. The environment in question involves Kubernetes, and the urgency is high due to the impending expiration. The impact of not addressing this could lead to potential service disruptions if the upgrade is not completed in time.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Prashant Dhanke initiated the conversation by acknowledging the expiration in November and mentioned that he would provide a timeline. This indicates the initial step of recognizing the need for an upgrade and planning.<br><br>

2. Prashant Dhanke tagged Samrat Talukder to check on the status or provide input, suggesting a collaborative approach to gather necessary information or resources for the upgrade planning.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Prashant Dhanke committed to getting back with a timeline, indicating the first step towards resolution by planning the upgrade process. However, no further steps or actions were confirmed in the conversation, leaving the resolution pending.<br><br>

2. The team needs to develop a detailed plan and timeline for the Kubernetes upgrade, considering the expiration in November. This involves assessing the current environment, identifying necessary changes, and scheduling the upgrade to avoid service disruptions.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to be a lack of a detailed timeline and plan for the Kubernetes upgrade, which is critical due to the expiration in November. The conversation suggests that while the need for an upgrade is recognized, the specific steps and timeline have not yet been established. Further investigation and planning are required to ensure a smooth transition and avoid potential service disruptions. The root cause is likely the absence of a coordinated plan and timeline for the upgrade process.<br><br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_5">
                    <td><span class="expand-indicator">‚ñ∂</span> 5</td>
                    <td>New Deployer  UI elb not working.</td>
                    <td><a href="https://app.clickup.com/t/86d0hampj" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-06</td>
                    <td><span class="status status-default">needs customer response</span></td>
                    <td>Rauneet Verma</td>
                </tr>
                <tr id="details_Capillary_5" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-06</div>
                                <div><strong>Status:</strong><br>needs customer response</div>
                                <div><strong>Owner:</strong><br>Rauneet Verma</div>
                                <div><strong>ClickUp ID:</strong><br>86d0hampj</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to configure a new Deployer UI with an Elastic Load Balancer (ELB) in their AWS environment. The expected outcome was for the Network Load Balancer (NLB) to be publicly accessible from the internet, allowing external traffic to reach the service. However, the configuration resulted in the creation of a Classic Load Balancer instead, which did not meet the requirements. This issue was critical as it impacted the accessibility of the Deployer UI, potentially affecting deployment operations.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Sreejith S reached out for assistance, indicating that Pramodh Ayyappan had previously helped with similar setups, suggesting a need for expertise in AWS load balancer configurations.<br><br>

2. Rauneet Verma inquired if the current setup had resulted in a Classic Load Balancer, indicating a mismatch with the intended configuration of a Network Load Balancer (NLB).<br><br>

3. Rauneet Verma suggested adding an annotation to the Kubernetes service to change the load balancer scheme:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>&quot;service.beta.kubernetes.io/aws-load-balancer-scheme&quot;: &quot;internet-facing&quot; Add this annotation in the service</code></pre>
</div>
   This annotation was intended to make the NLB publicly accessible from the internet, addressing the issue of the service not being reachable externally.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma recommended adding the following annotation to the Kubernetes service configuration:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>&quot;service.beta.kubernetes.io/aws-load-balancer-scheme&quot;: &quot;internet-facing&quot; Add this annotation in the service</code></pre>
</div>
   This step was aimed at ensuring the NLB was configured to be internet-facing, allowing external access.<br><br>

2. The team was advised to apply this configuration change and verify if the NLB became publicly accessible, which would resolve the issue of the Deployer UI not being reachable from the internet.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to have been caused by the absence of the correct annotation in the Kubernetes service configuration, which resulted in the creation of a Classic Load Balancer instead of a Network Load Balancer (NLB). The annotation <code class="inline-code">&quot;service.beta.kubernetes.io/aws-load-balancer-scheme&quot;: &quot;internet-facing&quot;</code> was necessary to configure the NLB to be publicly accessible. Without this annotation, the load balancer defaulted to a configuration that did not meet the customer's requirements for internet accessibility. Further investigation may be needed to confirm if the annotation resolves the issue completely.<br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_6">
                    <td><span class="expand-indicator">‚ñ∂</span> 6</td>
                    <td>Role binding not working for custom role</td>
                    <td><a href="https://app.clickup.com/t/86d0gxvrv" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-10-04</td>
                    <td><span class="status status-default">customer side fix</span></td>
                    <td>Rauneet Verma</td>
                </tr>
                <tr id="details_Capillary_6" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-10-04</div>
                                <div><strong>Status:</strong><br>customer side fix</div>
                                <div><strong>Owner:</strong><br>Rauneet Verma</div>
                                <div><strong>ClickUp ID:</strong><br>86d0gxvrv</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to bind a custom role to a user group within their Kubernetes environment. The expected outcome was that the role binding would be automatically created once the role or cluster role was established. However, the binding did not occur as anticipated. The environment involved Kubernetes, and the issue was related to the role binding process not functioning as expected, impacting user access management. The ticket status indicates that the resolution was on the customer side, suggesting guidance was provided to address the issue.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma requested temporary access to the environment for testing purposes, which Sreejith S granted. This step was necessary to allow further investigation into the role binding issue.<br><br>

2. Rauneet Verma instructed Sreejith S to change the filename to <code class="inline-code">k8s_access_controls</code> and perform a release. This was intended to ensure that the correct configuration was applied for role creation.<br>

3. Sreejith S confirmed that the role and cluster role were created using the <code class="inline-code">k8s_access_controls</code> resource, but noted that the expected role binding was not created:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>I have already done that. I was expecting the binding to be created.</code></pre>
</div>
   This indicated a discrepancy between the expected and actual outcomes.<br><br>

4. Rauneet Verma clarified that the <code class="inline-code">k8s_access_controls</code> does not automatically create role bindings or cluster role bindings, which was a critical insight into the issue:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>once the role/cluster role is created then to bound the user to the role 

   steps :</code></pre><br>
</div>
   This highlighted a misunderstanding of the process.<br><br>

5. Samarthya Gupta mentioned that the creation of cluster role bindings (CRB) and role bindings (RB) occurs only when the kubeconfig file is downloaded, suggesting a procedural step was missed.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma provided a detailed procedure for binding users to roles after the creation of roles or cluster roles:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>follow these steps to bind the user to the role:</code></pre>
</div>
   This included creating a custom role, mapping it to a user group, and assigning users to that group.<br><br>

2. It was clarified that only one role or cluster role can be provided at a time:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Note: Only one role or cluster role can be provided.</code></pre>
</div>
   This was crucial for ensuring the correct setup of role bindings.<br><br>

3. The customer was advised to ensure that the kubeconfig file is downloaded to trigger the creation of CRB and RB, as mentioned by Samarthya Gupta. This step was necessary to complete the role binding process.<br><br>

4. The customer was provided with guidance on the correct procedure to follow, ensuring that all necessary steps were understood and implemented correctly. The resolution was marked as a customer-side fix, indicating that the customer was responsible for executing the final steps.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to be a misunderstanding of the role binding process within the Kubernetes environment. The <code class="inline-code">k8s_access_controls</code> resource does not automatically create role bindings or cluster role bindings, which was not initially understood. The process requires manual steps to bind users to roles after the roles are created. Additionally, the creation of CRB and RB is contingent upon downloading the kubeconfig file, a step that was likely overlooked. Further investigation confirmed that the customer needed to follow specific procedural steps to achieve the desired role binding.<br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/6a9337c3-9597-4f10-a63d-2918a33adcc2/image.png" alt="image.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/6a9337c3-9597-4f10-a63d-2918a33adcc2/image.png', 'image.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/6a9337c3-9597-4f10-a63d-2918a33adcc2/image.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/13fc6c33-a77b-4907-9d86-0ab6e56cf221/image.png" alt="image.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/13fc6c33-a77b-4907-9d86-0ab6e56cf221/image.png', 'image.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/13fc6c33-a77b-4907-9d86-0ab6e56cf221/image.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/53f2aafd-077e-4a9b-b742-4a1a0e3dea05/Screenshot%202025-10-06%20at%2012.11.38%E2%80%AFPM.png" alt="Screenshot 2025-10-06 at 12.11.38‚ÄØPM.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/53f2aafd-077e-4a9b-b742-4a1a0e3dea05/Screenshot%202025-10-06%20at%2012.11.38%E2%80%AFPM.png', 'Screenshot 2025-10-06 at 12.11.38‚ÄØPM.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">Screenshot 2025-10-06 at 12.11.38‚ÄØPM.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/53f2aafd-077e-4a9b-b742-4a1a0e3dea05/Screenshot%202025-10-06%20at%2012.11.38%E2%80%AFPM.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_7">
                    <td><span class="expand-indicator">‚ñ∂</span> 7</td>
                    <td>crm-nightly-new env release failing (Unidentified error occurred)</td>
                    <td><a href="https://app.clickup.com/t/86d0fnqnb" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-30</td>
                    <td><span class="status status-progress">in progress</span></td>
                    <td>Omendra Tomar</td>
                </tr>
                <tr id="details_Capillary_7" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-30</div>
                                <div><strong>Status:</strong><br>in progress</div>
                                <div><strong>Owner:</strong><br>Omendra Tomar</div>
                                <div><strong>ClickUp ID:</strong><br>86d0fnqnb</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to execute a release in their <code class="inline-code">crm-nightly-new</code> environment, which was expected to complete successfully within 10-12 minutes as it had previously. However, they encountered an unidentified error causing the release to fail, followed by subsequent failures due to a state lock. Additionally, the release time increased significantly to 25-30 minutes. The environment involved was a non-production cluster using Infrastructure as Code (IAC) with recent changes in the <code class="inline-code">stage/3.30.20</code> version. The impact was a delay in release processes and potential disruptions in testing and development workflows.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Nihar Jain reported that the release was failing with an unidentified error and subsequent state lock issues. This was observed on the <code class="inline-code">crm-nightly-new</code> environment.<br>

2. Omendra Tomar began investigating the issue and identified that the problem was related to newly introduced feature actions in recent releases. This was determined through analysis of the release logs and feature changes.<br><br>

3. Nihar Jain noted that releases were taking significantly longer than expected, from the usual 10-12 minutes to over 30 minutes, indicating a performance degradation.<br><br>

4. Omendra Tomar decided to revert the recent feature changes to restore stability. This action was taken to test if the removal of new features would resolve the issue.<br><br>

5. After the rollback, Nihar Jain confirmed that while the releases were no longer failing, the time to complete the release remained high, suggesting that the rollback partially addressed the issue but did not resolve the performance degradation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Omendra Tomar reverted the newly introduced feature actions in the recent releases to restore stability. This was done to eliminate the potential cause of the release failures.<br><br>

2. Nihar Jain reverted the IAC to <code class="inline-code">stage/3.30.19</code>, which restored the release time to the usual duration. This action confirmed that the changes in <code class="inline-code">stage/3.30.20</code> were contributing to the increased release time.<br>

   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>I reverted IAC to stage/3.30.19, and release is taking as usual time, currently i am pinning all my non-prod cluster to IAC - stage/3.30.19.</code></pre>
</div>

3. Nihar Jain requested that no further changes be pushed to the production tag until the issue was resolved in the stage tag, ensuring stability in the production environment.<br><br>

4. Prashant Dhanke communicated with Krishnanunni Menon to ensure that the team was aware of the issue and to coordinate the fix, reducing the priority to high as the immediate blocking issue was resolved.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to have been caused by newly introduced feature actions in the <code class="inline-code">stage/3.30.20</code> release, which led to both release failures and increased execution times. The rollback to <code class="inline-code">stage/3.30.19</code> resolved the performance issue, indicating that the changes in the newer version were likely responsible for the degradation. Further investigation is needed to identify the specific feature or code change that caused the problem. The team has been advised to avoid pushing these changes to production until a fix is confirmed in the stage environment.<br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_8">
                    <td><span class="expand-indicator">‚ñ∂</span> 8</td>
                    <td>ecr-token-refresher-deployer job is failing leading to issues in multiple pod image pull in SGCRM</td>
                    <td><a href="https://app.clickup.com/t/86d0f8aq1" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-29</td>
                    <td><span class="status status-default">customer side fix</span></td>
                    <td>Rauneet Verma</td>
                </tr>
                <tr id="details_Capillary_8" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-29</div>
                                <div><strong>Status:</strong><br>customer side fix</div>
                                <div><strong>Owner:</strong><br>Rauneet Verma</div>
                                <div><strong>ClickUp ID:</strong><br>86d0f8aq1</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was experiencing issues with the <code class="inline-code">ecr-token-refresher-deployer</code> job failing, which led to problems with multiple pod image pulls in the SGCRM environment. The expected behavior was for the pods to pull images successfully and operate without interruption. However, the <code class="inline-code">coredns</code> pods were in a pending state, preventing the <code class="inline-code">ecr-token-refresher-deployer</code> pods from creating the necessary secrets. This issue impacted the deployment and operation of services reliant on these pods, causing potential downtime or degraded performance in the SGCRM environment.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma observed that the <code class="inline-code">coredns</code> pods were in a pending state. This was a critical observation as it indicated a scheduling issue that could affect other dependent services.<br>

2. Rauneet Verma deleted the <code class="inline-code">coredns</code> pods to force a rescheduling. This action was taken to resolve the pending state and allow the pods to be scheduled successfully.<br>

3. After the deletion and successful rescheduling of the <code class="inline-code">coredns</code> pods, Rauneet Verma noted that the <code class="inline-code">ecr-token-refresher-deployer</code> pods were able to create the necessary secrets. This indicated that the initial issue was related to the scheduling of the <code class="inline-code">coredns</code> pods, which was blocking the secret creation process.<br>

4. The successful creation of secrets by the <code class="inline-code">ecr-token-refresher-deployer</code> pods led to the resolution of the image pull issues, as the pods were now able to operate normally.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma deleted the <code class="inline-code">coredns</code> pods that were in a pending state. This action was necessary to resolve the scheduling issue that was preventing the <code class="inline-code">ecr-token-refresher-deployer</code> pods from functioning correctly.<br>

2. After the deletion, the <code class="inline-code">coredns</code> pods were successfully rescheduled. This step ensured that the pods were no longer in a pending state and could operate as expected.<br>

3. With the <code class="inline-code">coredns</code> pods successfully scheduled, the <code class="inline-code">ecr-token-refresher-deployer</code> pods were able to create the necessary secrets. This action resolved the initial issue of the pods being unable to pull images due to missing secrets.<br>

4. The resolution of the secret creation issue allowed the pods to pull images successfully, restoring normal operation in the SGCRM environment.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue was the <code class="inline-code">coredns</code> pods being in a pending state, which prevented the <code class="inline-code">ecr-token-refresher-deployer</code> pods from creating the necessary secrets. This pending state was likely due to scheduling constraints or resource allocation issues within the cluster. By deleting and rescheduling the <code class="inline-code">coredns</code> pods, the blockage was removed, allowing the <code class="inline-code">ecr-token-refresher-deployer</code> pods to function correctly and create the required secrets. Further investigation into the scheduling policies and resource allocations might be needed to prevent recurrence.<br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_9">
                    <td><span class="expand-indicator">‚ñ∂</span> 9</td>
                    <td>When we configure new Alerts, the alerts are not created in prometheus</td>
                    <td><a href="https://app.clickup.com/t/86d0dx4qy" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-24</td>
                    <td><span class="status status-default">needs customer response</span></td>
                    <td>Rauneet Verma</td>
                </tr>
                <tr id="details_Capillary_9" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-24</div>
                                <div><strong>Status:</strong><br>needs customer response</div>
                                <div><strong>Owner:</strong><br>Rauneet Verma</div>
                                <div><strong>ClickUp ID:</strong><br>86d0dx4qy</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to configure new alerts in Prometheus, expecting them to appear in the Prometheus UI. However, the alerts were not being created as expected. The issue was identified in the Prometheus environment, specifically within the Prometheus Operator, where a syntax error in a PromQL expression was causing the entire PrometheusRule configuration to fail. This prevented any new rules from being displayed in the Prometheus UI, impacting the customer's ability to monitor their systems effectively.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma requested the output of the <code class="inline-code">kubectl get prometheusrules</code> command to verify the current state of Prometheus rules, but encountered a permission error:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Error from server (Forbidden): prometheusrules.monitoring.coreos.com is forbidden: User &quot;system:serviceaccount:default:rauneet.verma-facets.cloud&quot; cannot list resource &quot;prometheusrules&quot; in API group &quot;monitoring.coreos.com&quot; in the namespace &quot;default&quot;</code></pre>
</div>
   This indicated a lack of necessary permissions to access the Prometheus rules.<br><br>

2. Kishan Kumar confirmed that the alert <code class="inline-code">mongo-auditlog-alert-alert-group</code> was visible, suggesting that some alerts were configured but not all were appearing as expected.<br>

3. Rauneet Verma executed a command to check the logs of the Prometheus Operator pod for any errors related to rule processing:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù BASH</div>
<pre class="code-block"><code>kubectl logs prometheus-operator-operator-57f844c6c5-sm2h8 -n default --tail=100 | grep -E &#x27;rule|error|warn|fail&#x27; -i</code></pre>
</div>
   The logs revealed an error:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>level=info ts=2025-09-25T06:06:50.780170556Z caller=rules.go:41 component=prometheusoperator msg=&quot;Invalid rule&quot; err=&quot;8:11: group \&quot;pod.rules\&quot;, rule 1, \&quot;EventNotificationKafkaEventsInQueue\&quot;: could not parse expression: 1:97: parse error: unexpected character inside braces: &#x27;)&#x27;&quot;
   level=error ts=2025-09-25T06:06:51.099281788Z caller=klog.go:116 component=k8s_client_runtime func=ErrorDepth msg=&quot;sync \&quot;default/prometheus-operator-prometheus\&quot; failed: Invalid rule&quot;</code></pre><br>
</div>
   This indicated a syntax error in the PromQL expression for the rule <code class="inline-code">EventNotificationKafkaEventsInQueue</code>, causing the Prometheus Operator to reject all rules.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Rauneet Verma identified the syntax error in the PromQL expression for the rule <code class="inline-code">EventNotificationKafkaEventsInQueue</code> and communicated this to Kishan Kumar, advising to correct the syntax error:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>The rule EventNotificationKafkaEventsInQueue in the pod.rules group has an invalid PromQL expression with an unexpected ) character inside braces at position 97.
   The Prometheus Operator is rejecting ALL rules because of the syntax error in the EventNotificationKafkaEventsInQueue rule.</code></pre><br>
</div>

2. Kishan Kumar acknowledged the issue and committed to checking and fixing the syntax error in the PromQL expression. This step was necessary to ensure that the Prometheus Operator could successfully sync the PrometheusRule configuration and display new alerts in the UI.<br><br>

3. The resolution is pending confirmation from the customer after the syntax error is corrected, as the ticket status indicates 'needs customer response'.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue was a syntax error in the PromQL expression for the rule <code class="inline-code">EventNotificationKafkaEventsInQueue</code>. This error, specifically an unexpected ')' character inside braces, caused the Prometheus Operator to reject the entire PrometheusRule configuration. As a result, no new rules could be synced or displayed in the Prometheus UI. This was identified through log analysis of the Prometheus Operator pod, which highlighted the invalid rule and its impact on the rule synchronization process. Further investigation and correction of the syntax error are required to resolve the issue completely.<br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_10">
                    <td><span class="expand-indicator">‚ñ∂</span> 10</td>
                    <td>Annotation change not reflecting in security group - deployer-lb-new</td>
                    <td><a href="https://app.clickup.com/t/86d0d02v0" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-22</td>
                    <td><span class="status status-default">customer side fix</span></td>
                    <td>Omendra Tomar</td>
                </tr>
                <tr id="details_Capillary_10" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-22</div>
                                <div><strong>Status:</strong><br>customer side fix</div>
                                <div><strong>Owner:</strong><br>Omendra Tomar</div>
                                <div><strong>ClickUp ID:</strong><br>86d0d02v0</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to update the annotations for their <code class="inline-code">deployer-lb-new</code> service to reflect changes in the AWS security group. The expected outcome was for these changes to be applied successfully, allowing the service to operate with the updated IP ranges. However, the changes were not taking effect due to a limitation in the AWS security group rules. Specifically, the security group had reached its maximum rule limit, preventing any new rules from being added. This resulted in the AWS Load Balancer Controller failing to update the security group, causing the annotation changes to remain unapplied. The environment in question was the <code class="inline-code">deployer-infra</code>, and the issue was critical as it impacted the service's ability to manage traffic effectively.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Omendra Tomar requested confirmation from Sreejith S regarding the environment where the resource was configured. Sreejith confirmed it was in the <code class="inline-code">deployer-infra</code> environment.<br>

2. Omendra Tomar requested temporary access to the environment to investigate further, which Sreejith granted.<br><br>

3. Omendra Tomar identified that the service had a large number of IP addresses specified in the <code class="inline-code">load-balancer-source-ranges</code> annotation:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>service.beta.kubernetes.io/load-balancer-source-ranges: &gt;-
   0.0.0.0/0,3.225.18.198/32,3.229.249.100/32,35.172.238.236/32,52.24.221.0/32,<br>
   44.229.119.0/32,34.212.14.28/32,50.112.110.255/32,54.218.189.181/32,<br>
   35.162.29.228/32,54.247.60.162/32,52.214.98.25/32,54.235.251.85/32,<br>
   3.227.110.70/32,13.214.150.33/32,52.77.72.215/32,3.0.242.134/32,3.1.68.245/32,<br>
   15.206.252.159/32,15.206.252.149/32,18.224.36.121/32,18.189.151.155/32,<br>
   54.144.169.188/32,52.21.28.28/32,3.130.198.24/32,18.188.84.75/32,<br>
   18.211.138.37/32,63.33.234.65/32,54.77.13.74/32,34.253.37.18/32,<br>
   79.125.32.40/32,18.204.109.171/32,44.216.85.93/32,13.56.244.16/32,<br>
   52.21.28.30/32,192.30.252.0/22,143.55.64.0/20,185.199.108.0/22,140.82.112.0/20</code></pre><br>
</div>

4. Omendra Tomar used the following command to describe the service and check for errors:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù BASH</div>
<pre class="code-block"><code>kubectl describe svc deployer-lb-new -n default</code></pre>
</div>
   This revealed the error message indicating the security group rule limit had been exceeded:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Warning  SyncLoadBalancerFailed  38m (x3825 over 13d)    service-controller  (combined from similar events): Error syncing load balancer: failed to ensure load balancer: error authorizing security group ingress: &quot;RulesPerSecurityGroupLimitExceeded: The maximum number of rules per security group has been reached.\n\tstatus code: 400, request id: 35b32001-3601-40cb-a402-8dcf33067cfd&quot;</code></pre>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Omendra Tomar suggested removing any unused IPs from the service‚Äôs annotation to free up space for new rules. This would help in reducing the number of rules required in the AWS security group.<br><br>

2. It was recommended to consolidate IP ranges where possible to minimize the number of individual rules needed.<br><br>

3. If the above steps were insufficient, Omendra advised requesting a quota increase for the "RulesPerSecurityGroup" limit through the AWS Support Center.<br><br>

4. Rauneet Verma confirmed that the issue was customer was provided guidance for updating the service configuration to pass the CIDR ranges directly under <code class="inline-code">spec.loadBalancerSourceRanges</code>:<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>This is fixed by passing the cidr ranges in the service under spec.loadBalancerSourceRanges:</code></pre>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue was the AWS security group reaching its maximum rule limit, which prevented the AWS Load Balancer Controller from applying new IP address rules specified in the service annotations. This was confirmed by the error message indicating a "RulesPerSecurityGroupLimitExceeded" error. The service had over 40 individual IP addresses or CIDR blocks specified, each requiring a separate rule, leading to the rule limit being exceeded. Further investigation revealed that reducing the number of IPs or consolidating them into broader CIDR ranges could mitigate the issue. Additionally, requesting a quota increase from AWS was suggested as a potential long-term solution.<br><br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/ae085b5b-ef02-43cd-b7b0-27d34463624b/image.png" alt="image.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/ae085b5b-ef02-43cd-b7b0-27d34463624b/image.png', 'image.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/ae085b5b-ef02-43cd-b7b0-27d34463624b/image.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_11">
                    <td><span class="expand-indicator">‚ñ∂</span> 11</td>
                    <td>S3 Leagcy to Alpha Issue </td>
                    <td><a href="https://app.clickup.com/t/86d0cdqzn" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-19</td>
                    <td><span class="status status-progress">in progress</span></td>
                    <td>Abhisht Bagewadi</td>
                </tr>
                <tr id="details_Capillary_11" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-19</div>
                                <div><strong>Status:</strong><br>in progress</div>
                                <div><strong>Owner:</strong><br>Abhisht Bagewadi</div>
                                <div><strong>ClickUp ID:</strong><br>86d0cdqzn</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was experiencing an issue related to the transition from S3 Legacy to Alpha. The expected outcome was a seamless transition without any disruptions, but the actual result was an unspecified problem that required further investigation. The issue was marked as high priority, indicating a significant impact on the customer's operations. The environment in question was not initially specified, prompting a request for clarification and access to the relevant resources for troubleshooting. Engineers Prashant Dhanke and Abhisht Bagewadi were involved in addressing the issue, with Abhisht requesting additional information and access to proceed with the investigation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Abhisht Bagewadi initiated the investigation by requesting clarification on the specific environment involved in the issue. This step was crucial to ensure that the correct resources were being examined:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Could you let me know which environment you are referring to?</code></pre>
</div>

2. Prashant Dhanke suggested that Abhisht consult with Rohit Raveendran for further guidance. This indicates a collaborative approach to troubleshooting, leveraging team expertise to identify the environment and resources involved.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. The team is currently awaiting further information regarding the specific environment from Shivam Kumar Gupta. This step is necessary to proceed with targeted troubleshooting and resolution efforts.<br><br>

2. Once the environment is identified, Abhisht Bagewadi will require temporary access to review the resources and conduct a detailed investigation. This access is essential for diagnosing the issue and implementing any necessary fixes.<br><br>

3. Pending the identification of the environment and access provision, the team plans to analyze the resources and configurations to pinpoint the root cause and apply appropriate solutions. This step will involve examining logs, configurations, and system interactions to resolve the issue effectively.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The root cause of the issue is currently undetermined due to the lack of specific information about the environment involved. The investigation is ongoing, with the team awaiting further details to proceed. The issue appears to be related to the transition from S3 Legacy to Alpha, but further analysis is needed to confirm the exact technical cause. Potential contributing factors include configuration mismatches or resource access issues, which will be explored once the environment is clarified and access is granted.<br><br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_12">
                    <td><span class="expand-indicator">‚ñ∂</span> 12</td>
                    <td>Container Storage Usage Metric Not Available</td>
                    <td><a href="https://app.clickup.com/t/86d0cahpn" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-19</td>
                    <td><span class="status status-default">needs customer response</span></td>
                    <td>Abhisht Bagewadi</td>
                </tr>
                <tr id="details_Capillary_12" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-19</div>
                                <div><strong>Status:</strong><br>needs customer response</div>
                                <div><strong>Owner:</strong><br>Abhisht Bagewadi</div>
                                <div><strong>ClickUp ID:</strong><br>86d0cahpn</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, reported an issue where the <code class="inline-code">container_fs_usage_bytes</code> metric was not available in their Prometheus monitoring setup. This metric is crucial for monitoring container storage usage. The expected behavior was for Prometheus to collect and display this metric, but due to default filtering rules applied by the Helm chart, it was not being collected. This issue was identified as a common problem in the community, affecting the visibility of container storage metrics. The environment specifics were not initially provided, prompting further clarification requests.<br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Abhisht Bagewadi identified that the <code class="inline-code">container_fs_usage_bytes</code> metric was not being collected in Prometheus due to default filtering rules applied by the Helm chart. This was confirmed by referencing a known issue reported in the community.<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>metric is not being collected in Prometheus . This is due to the default filtering rules applied by the Helm chart.
   
   This issue was observed across metrics collection and has also been reported in the community ( reference:</code></pre><br>
</div>

2. Abhisht Bagewadi suggested updating the Prometheus resource with an advanced configuration to address the issue. This configuration aimed to remove the default cAdvisor metric filtering, thereby enabling the collection of all container filesystem metrics.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Please update your Prometheus resource with the following advanced configuration:</code></pre>
</div>

3. The proposed configuration changes were detailed, including the removal of <code class="inline-code">cAdvisorMetricRelabelings</code> to ensure all relevant metrics are collected.<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>&quot;kube_prometheus_stack&quot;: {
   &quot;cAdvisorMetricRelabelings&quot;: []</code></pre><br>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Abhisht Bagewadi recommended updating the Prometheus configuration to remove the default cAdvisor metric filtering. This involved modifying the Helm chart values to include an empty <code class="inline-code">cAdvisorMetricRelabelings</code> array, which would allow the collection of all container filesystem metrics.<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù JSON</div>
<pre class="code-block"><code>&quot;kube_prometheus_stack&quot;: {
     &quot;values&quot;: {<br>
       &quot;kubelet&quot;: {<br>
         &quot;serviceMonitor&quot;: {<br>
           &quot;cAdvisorMetricRelabelings&quot;: []<br>
         }<br>
       }<br>
     }<br>
   }</code></pre><br>
</div>

2. The effects of this change were outlined, indicating that it would restore full visibility into container storage usage by enabling the collection of the <code class="inline-code">container_fs_usage_bytes</code> metric.<br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Effect of This Change</code></pre>
</div>

3. Resource planning considerations were provided, noting that the metric volume and Prometheus memory consumption would increase, and the time-series database would grow faster due to the additional metrics.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Resource Planning Considerations
   ‚Ä¢ Metric Volume: Will increase<br>
   ‚Ä¢ Memory Usage: Prometheus memory consumption will increase<br>
   ‚Ä¢ Storage Impact: Time-series database will grow faster due to the additional metrics</code></pre><br>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue was the default filtering rules applied by the Helm chart used in the Prometheus setup, which prevented the <code class="inline-code">container_fs_usage_bytes</code> metric from being collected. This filtering was part of the default configuration that excluded certain cAdvisor metrics. The issue was identified through community reports and confirmed by the team. The proposed solution involved updating the Prometheus configuration to remove these filtering rules, thereby enabling the collection of all relevant container filesystem metrics. Further investigation may be needed to confirm the complete resolution once the changes are applied.<br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_13">
                    <td><span class="expand-indicator">‚ñ∂</span> 13</td>
                    <td>Too many Grant Previlige calls from Crossplane to Mysql Users.</td>
                    <td><a href="https://app.clickup.com/t/86d0bwzj4" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-18</td>
                    <td><span class="status status-default">needs customer response</span></td>
                    <td>Debarshi Mullick</td>
                </tr>
                <tr id="details_Capillary_13" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-18</div>
                                <div><strong>Status:</strong><br>needs customer response</div>
                                <div><strong>Owner:</strong><br>Debarshi Mullick</div>
                                <div><strong>ClickUp ID:</strong><br>86d0bwzj4</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, reported an issue with Crossplane making excessive GRANT privilege calls to MySQL users. This behavior was unexpected as it resulted in a high volume of audit log entries, which was not anticipated. The environment involved Crossplane's integration with MySQL, where Crossplane's reconciliation process was causing repeated GRANT operations. This led to unnecessary log noise and potential performance concerns due to the frequency of these operations. The issue was identified in a high-priority context, requiring immediate attention to mitigate the impact on system operations.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Rohit Raveendran explained the behavior of Crossplane, noting that it follows a declarative reconciliation pattern. This pattern ensures that the actual state matches the desired state by checking existing permissions, comparing them with the desired state, and reapplying GRANTs every 10 minutes. This process is hardcoded in the provider-sql and is intended for drift detection and self-healing.<br><br>

2. The team observed that this behavior was causing excessive audit log entries due to the repeated GRANT operations, even when no changes were necessary. This was identified as a potential source of the issue, contributing to the log noise and system performance concerns.<br><br>

3. Rohit suggested a solution involving a two-tier user management approach to mitigate the issue. This approach was discussed to limit the root user's audit log entries and reduce the frequency of GRANT operations appearing in the logs.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Rohit Raveendran proposed implementing a two-tier user management approach. This involves creating a 'User-Provisioner' MySQL user with root credentials from the RDS master database, which has ADMIN privileges on mysql.* to create users and grant permissions. This user would be reconciled every 10 minutes, limiting root's audit log entries to just one user's management.<br><br>

2. Application users would then be created using the 'User-Provisioner' credentials, ensuring that the root is never used for these users. This change would ensure that all GRANT operations in audit logs appear as coming from the 'provisioner' user, not root, thereby reducing log noise.<br><br>

3. The team recommended creating read-only, read-write, or schema-management users as needed using the 'User-Provisioner' credentials, which would help in managing permissions more effectively without involving the root user directly.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to be caused by Crossplane's declarative reconciliation pattern, which re-applies GRANT operations every 10 minutes to ensure the actual state matches the desired state. This behavior, while intentional for drift detection and self-healing, led to excessive audit log entries due to repeated GRANT operations. The root cause was identified as the lack of a differentiated user management approach, which resulted in all GRANT operations being logged under the root user. Implementing a two-tier user management system was suggested to address this issue by reducing the frequency and visibility of these operations in the audit logs.<br><br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/66a97d66-1a1d-41d9-8033-2209a6a266a9/GrantAccess.png" alt="GrantAccess.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/66a97d66-1a1d-41d9-8033-2209a6a266a9/GrantAccess.png', 'GrantAccess.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">GrantAccess.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/66a97d66-1a1d-41d9-8033-2209a6a266a9/GrantAccess.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_14">
                    <td><span class="expand-indicator">‚ñ∂</span> 14</td>
                    <td>Discrepancy on new and old ui</td>
                    <td><a href="https://app.clickup.com/t/86d0bw8xy" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-18</td>
                    <td><span class="status status-default">pending (ack)</span></td>
                    <td>Himanshu Mahto</td>
                </tr>
                <tr id="details_Capillary_14" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-18</div>
                                <div><strong>Status:</strong><br>pending (ack)</div>
                                <div><strong>Owner:</strong><br>Himanshu Mahto</div>
                                <div><strong>ClickUp ID:</strong><br>86d0bw8xy</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, reported a discrepancy between the new and old UI where CPU/memory limits set by users appeared to revert to older values, and unexpected entries were found in the override section. This issue was observed in their environment, potentially affecting resource management and application performance. The expected behavior was for the user-defined limits to persist without alteration. The anomaly was noted by Bony Mondal, and further investigation was requested by Rauneet Verma, involving permissions for Himanshu Mahto to access the project for deeper analysis.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Bony Mondal observed an anomaly where user-defined CPU/memory limits seemed to revert to previous values, and unexpected entries appeared in the override section. This was reported to the team for further investigation.<br><br>

2. Rauneet Verma requested Bony Mondal to share relevant URLs in the ticket to facilitate the investigation. This step was crucial to ensure all team members had access to the necessary resources for troubleshooting.<br><br>

3. Rauneet Verma also requested Sreejith S to grant Himanshu Mahto permission to view the project, indicating that access issues needed to be resolved to allow for a comprehensive investigation by the team.<br><br>

4. The team discussed the need to connect and coordinate efforts to address the issue, as indicated by Rauneet Verma's request for a meeting with Bony Mondal and others involved.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. The team was advised to review the configuration settings and logs to identify any discrepancies between the user-defined settings and the applied configurations. This step was necessary to pinpoint the source of the anomaly.<br><br>

2. It was recommended that permissions be verified and adjusted as needed to ensure all team members involved in the investigation had the appropriate access to the project resources. This was crucial for enabling a thorough analysis and resolution of the issue.<br><br>

3. The customer was advised to monitor the system for any further anomalies and report back with additional details if the issue persisted. This would help in gathering more data for a potential root cause analysis.<br><br>

4. Resolution pending confirmation: The team is awaiting further information and confirmation from the customer regarding any changes or persistence of the issue after initial checks and adjustments.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the issue appears to be a configuration mismatch or an error in the application of user-defined settings, leading to the reversion of CPU/memory limits to older values. This could be due to a bug in the system that incorrectly processes or overrides user inputs. Further investigation is needed to confirm the exact cause, as the current analysis is based on observed symptoms and initial checks. The team is working on verifying configurations and ensuring proper permissions are in place to facilitate a detailed investigation.<br><br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/140a20ff-931e-402a-bc4c-fdd57e76f386/image.png" alt="image.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/140a20ff-931e-402a-bc4c-fdd57e76f386/image.png', 'image.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/140a20ff-931e-402a-bc4c-fdd57e76f386/image.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/57d14ac7-126b-42dd-97d7-26dff11529df/Screenshot%202025-09-18%20at%2011.59.58%E2%80%AFAM.png" alt="Screenshot 2025-09-18 at 11.59.58‚ÄØAM.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/57d14ac7-126b-42dd-97d7-26dff11529df/Screenshot%202025-09-18%20at%2011.59.58%E2%80%AFAM.png', 'Screenshot 2025-09-18 at 11.59.58‚ÄØAM.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">Screenshot 2025-09-18 at 11.59.58‚ÄØAM.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/57d14ac7-126b-42dd-97d7-26dff11529df/Screenshot%202025-09-18%20at%2011.59.58%E2%80%AFAM.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_15">
                    <td><span class="expand-indicator">‚ñ∂</span> 15</td>
                    <td>USHC Full Release failed<span class="slack-indicator">Slack Thread</span></td>
                    <td><a href="https://app.clickup.com/t/86d09vn93" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-12</td>
                    <td><span class="status status-default">pending (ack)</span></td>
                    <td>Abhisht Bagewadi</td>
                </tr>
                <tr id="details_Capillary_15" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-12</div>
                                <div><strong>Status:</strong><br>pending (ack)</div>
                                <div><strong>Owner:</strong><br>Abhisht Bagewadi</div>
                                <div><strong>ClickUp ID:</strong><br>86d09vn93</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting a full release of their USHC environment, which failed due to an AWS ACM certificate issue. The expected outcome was a successful deployment with the new SSL certificate automatically replacing the expiring one. However, the release process was blocked because the existing certificate (ID: 701b673c-9f25-4030-8cad-22420d743184) was still associated with AWS resources, preventing its deletion. This issue occurred in the us-east-1 region, impacting the deployment process and requiring manual intervention to update the certificate.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Abhisht Bagewadi initiated the investigation by identifying that the release process was blocked due to an AWS ACM certificate being used by other AWS resources. This was confirmed by checking the certificate details in the AWS Console.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>release process could not be completed because an AWS ACM (Certificate Manager) certificate is currently being used by other AWS resources.</code></pre>
</div>

2. Nikhil Tidke noted that the certificate was expiring in 11 days and a new certificate had already been created. He questioned why the new certificate was not automatically associated during the deployment.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Actually this certificate is going to expire in 11 days and a new certificate is already created.</code></pre>
</div>

3. Abhisht Bagewadi requested access to the cluster to further investigate the issue and understand the certificate renewal process.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Can i get the cluster access for the respective environment ?</code></pre>
</div>

4. Ishaan Kalra asked if the load balancer was attached to other subnets, which could affect the certificate association, but this was not immediately clarified.<br><br>

5. Nikhil Tidke confirmed that the new certificate was manually updated in the AWS Console, but the old certificate was still associated with the load balancer, causing the issue.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>We have manully updated the New SSL certificate from AWS Console. Now in next release our old should get deleted.</code></pre>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Nikhil Tidke manually updated the new SSL certificate in the AWS Console to ensure it was correctly associated with the necessary resources. This was a temporary measure to bypass the automatic deployment issue.<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>We have manully updated the New SSL certificate from AWS Console. Now in next release our old should get deleted.</code></pre>
</div>

2. Ishaan Kalra suggested detaching the old certificate from the load balancer manually to resolve the immediate blockage and allow the release to proceed.<br><br>

3. It was recommended to migrate the legacy 'tools' resource to the latest version to prevent similar issues in future deployments.<br><br>

4. The team planned to connect and discuss further steps to ensure the new certificate is automatically associated in future releases and to address any underlying automation issues.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The likely root cause of the release failure was the existing AWS ACM certificate (ID: 701b673c-9f25-4030-8cad-22420d743184) being associated with a load balancer, preventing its deletion during the deployment process. This association blocked the automatic update to the new certificate, which was already created but not linked. The issue was compounded by the legacy configuration of the 'tools' resource, which did not automatically update the certificate as expected. Manual intervention was required to update the certificate and detach the old one, highlighting a need for improved automation in the certificate management process.<br><br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_16">
                    <td><span class="expand-indicator">‚ñ∂</span> 16</td>
                    <td>USHC Plan Release failed</td>
                    <td><a href="https://app.clickup.com/t/86d09ue6c" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-12</td>
                    <td><span class="status status-default">invalid</span></td>
                    <td>Unassigned</td>
                </tr>
                <tr id="details_Capillary_16" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-12</div>
                                <div><strong>Status:</strong><br>invalid</div>
                                <div><strong>Owner:</strong><br>Unassigned</div>
                                <div><strong>ClickUp ID:</strong><br>86d09ue6c</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to execute a USHC Plan Release, which is a critical operation within their environment. The expected outcome was a successful deployment without any errors. However, the process failed, leading to an urgent ticket being raised. The ticket was marked as 'invalid' after a brief investigation by Nikhil Tidke, who indicated that the issue was identified and resolved internally. The environment involved was likely a production or staging setup, given the urgency and the nature of the operation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. Nikhil Tidke reviewed the issue and quickly identified the problem internally. The conversation suggests that the issue was straightforward enough to be resolved without extensive debugging steps being documented.<br><br>

2. The only technical content provided was a brief message from Nikhil Tidke:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Please ignore.</code></pre>
</div>
   This indicates that the problem was either a non-issue or resolved through a simple action not detailed in the conversation.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. Nikhil Tidke acknowledged the issue and indicated that it was resolved internally. The lack of detailed resolution steps suggests that the problem was minor or self-correcting.<br><br>

2. The message "Please ignore" implies that no further action was necessary from the support team, and the customer was likely informed that the issue was resolved on their side.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The root cause of the issue appears to be a minor or transient problem that was quickly identified and resolved by Nikhil Tidke. The lack of detailed technical discussion or further troubleshooting steps suggests that the issue was either a misunderstanding or a temporary glitch that did not require significant intervention. Further investigation would be needed to confirm the exact nature of the problem, but it was deemed non-critical by the engineer involved.<br><br>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="expandable" data-ticket-id="Capillary_17">
                    <td><span class="expand-indicator">‚ñ∂</span> 17</td>
                    <td>Facing Issue with Custom Role assigned to a User while rolling restart</td>
                    <td><a href="https://app.clickup.com/t/86d09gu5m" 
                           style="color: #7c3aed; text-decoration: none; padding: 5px 12px; 
                                  border: 1px solid #7c3aed; border-radius: 6px; display: inline-block; font-size: 0.85rem;"
                           target="_blank" onclick="event.stopPropagation()">View</a></td>
                    <td>2025-09-11</td>
                    <td><span class="status status-default">as designed</span></td>
                    <td>Debarshi Mullick</td>
                </tr>
                <tr id="details_Capillary_17" style="display: none;">
                    <td colspan="6" style="padding: 0;">
                        <div style="background: #f9fafb; padding: 20px 60px; border-left: 4px solid #7c3aed;">
                            
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; 
                                        padding: 15px; background: white; border-radius: 6px;">
                                <div><strong>Customer:</strong><br>Capillary</div>
                                <div><strong>Date:</strong><br>2025-09-11</div>
                                <div><strong>Status:</strong><br>as designed</div>
                                <div><strong>Owner:</strong><br>Debarshi Mullick</div>
                                <div><strong>ClickUp ID:</strong><br>86d09gu5m</div>
                                <div><strong>Analysis:</strong><br>‚úÖ AI Generated</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìã Summary of the Issue</h4>
                                <div class="rca-content-box">
                                    The customer, Capillary, was attempting to perform a rolling restart of a Kubernetes pod using a custom role. The expectation was that the assigned role would allow the restart operation. However, the operation failed because the Kubernetes reader role lacked the necessary update permissions required for a rollout restart. This issue was identified in a high-priority ticket involving engineers Debarshi Mullick, Nikhil Tidke, and Samarthya Gupta. The environment involved Kubernetes, and the problem impacted the ability to manage application rollouts effectively.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üîç Steps to Debug</h4>
                                <div class="rca-content-box">
                                    1. **Debarshi Mullick** initiated the investigation by acknowledging the issue and began looking into the role permissions.<br><br>

2. **Samarthya Gupta** identified that the problem was related to the Kubernetes reader role, which lacked the <code class="inline-code">update</code> permission necessary for performing a rollout restart. This was communicated to **Nikhil Tidke**.<br>

3. **Samarthya Gupta** suggested creating another Kubernetes role or providing the developer (k8s debugger) permission to resolve the issue. This suggestion was made to ensure the necessary permissions were available for the restart operation.<br><br>

4. **Nikhil Tidke** inquired about the process to create another role and the specific permissions associated with the k8s debugger role. This was to understand the potential solutions and their implications.<br><br>

5. **Nikhil Tidke** also questioned the significance of the "Application Rollout Checkbox" in the UI, indicating a possible misunderstanding of its functionality in relation to role permissions:<br><br>
   <div class="code-block-wrapper">
<div class="code-header">üìù CODE</div>
<pre class="code-block"><code>Also what&#x27;s the significance of having Application Rollout Checkbox in UI?</code></pre>
</div>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">‚úÖ Steps to Resolution</h4>
                                <div class="rca-content-box">
                                    1. **Samarthya Gupta** recommended creating a new Kubernetes role with the necessary <code class="inline-code">update</code> permissions or assigning the developer (k8s debugger) role to the user. This was to ensure that the user had the required permissions to perform a rollout restart.<br>

2. **Nikhil Tidke** was advised to explore the creation of a new role or adjust existing role permissions to include the <code class="inline-code">update</code> capability. This step was crucial to align the role capabilities with the operational requirements.<br>

3. The team suggested reviewing the UI elements, such as the "Application Rollout Checkbox," to ensure they accurately reflect the permissions and capabilities associated with the roles. This was to prevent future misunderstandings about the functionality of UI components in relation to role permissions.<br><br>

4. The customer was provided guidance on adjusting role permissions to facilitate the required operations, pending their confirmation of the changes.<br><br>
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üéØ Root Cause Analysis</h4>
                                <div class="rca-content-box">
                                    The issue appears to be due to insufficient permissions associated with the Kubernetes reader role, which lacked the <code class="inline-code">update</code> permission necessary for performing a rollout restart. This was identified through the team's analysis of the role's capabilities and the requirements for the restart operation. The misunderstanding regarding the "Application Rollout Checkbox" in the UI further complicated the issue, as it led to incorrect assumptions about the permissions granted by the role. Further investigation into the UI's role in permissions management is recommended to prevent similar issues in the future.<br>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: #1f2937;">üìé ClickUp Attachments & Screenshots</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
                                    <div style="border: 2px solid #e5e7eb; border-radius: 8px; overflow: hidden; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <img src="https://t3443930.p.clickup-attachments.com/t3443930/64fa5e22-ad8d-4c97-884c-d081c4db617b/image-20250910-095610.png" alt="image-20250910-095610.png" style="width: 100%; height: 200px; object-fit: cover; cursor: pointer;" onclick="openImageViewer('https://t3443930.p.clickup-attachments.com/t3443930/64fa5e22-ad8d-4c97-884c-d081c4db617b/image-20250910-095610.png', 'image-20250910-095610.png')">
                                        <div style="padding: 12px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                                            <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">image-20250910-095610.png</div>
                                            <a href="https://t3443930.p.clickup-attachments.com/t3443930/64fa5e22-ad8d-4c97-884c-d081c4db617b/image-20250910-095610.png" target="_blank" style="color: #7c3aed; text-decoration: none; font-size: 0.85rem;">View Full Size ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr></table></div>
    </div>
    
    <script>
        // Ensure all details are expanded when printing
        window.addEventListener('beforeprint', function() {
            // Expand all detail rows before printing
            const detailRows = document.querySelectorAll('[id^="details_"]');
            detailRows.forEach(row => {
                row.style.display = 'table-row';
            });
            
            // Hide expand indicators
            const indicators = document.querySelectorAll('.expand-indicator');
            indicators.forEach(indicator => {
                indicator.style.display = 'none';
            });
        });
        
        // Optional: Restore collapsed state after printing (commented out to keep expanded)
        // window.addEventListener('afterprint', function() {
        //     const detailRows = document.querySelectorAll('[id^="details_"]');
        //     detailRows.forEach(row => {
        //         row.style.display = 'none';
        //     });
        // });
        
        function toggleDetails(ticketId) {
            const detailsRow = document.getElementById('details_' + ticketId);
            const clickedRow = detailsRow.previousElementSibling;
            const indicator = clickedRow.querySelector('.expand-indicator');
            
            if (detailsRow.style.display === 'table-row') {
                detailsRow.style.display = 'none';
                indicator.innerHTML = '‚ñ∂';
                clickedRow.classList.remove('expanded');
            } else {
                // Close all other expanded rows
                document.querySelectorAll('[id^="details_"]').forEach(row => {
                    row.style.display = 'none';
                    if (row.previousElementSibling) {
                        row.previousElementSibling.classList.remove('expanded');
                        row.previousElementSibling.querySelector('.expand-indicator').innerHTML = '‚ñ∂';
                    }
                });
                
                detailsRow.style.display = 'table-row';
                indicator.innerHTML = '‚ñº';
                clickedRow.classList.add('expanded');
            }
        }
        
        let lastEnterTime = 0;

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const sections = document.querySelectorAll('.customer-section');
            let totalVisible = 0;

            sections.forEach(section => {
                const customerName = section.querySelector('h2').textContent.toLowerCase();
                const rows = section.querySelectorAll('tr.expandable');
                let hasVisibleRows = false;

                rows.forEach(row => {
                    const cells = row.cells;
                    const title = cells[1] ? cells[1].textContent.toLowerCase() : '';
                    const clickupId = cells[2] ? cells[2].textContent.toLowerCase() : '';
                    const date = cells[3] ? cells[3].textContent.toLowerCase() : '';
                    const status = cells[4] ? cells[4].textContent.toLowerCase() : '';
                    const owner = cells[5] ? cells[5].textContent.toLowerCase() : '';

                    const shouldShow = searchTerm === '' ||
                                     title.includes(searchTerm) ||
                                     customerName.includes(searchTerm) ||
                                     clickupId.includes(searchTerm) ||
                                     date.includes(searchTerm) ||
                                     status.includes(searchTerm) ||
                                     owner.includes(searchTerm);

                    row.style.display = shouldShow ? '' : 'none';
                    if (shouldShow) {
                        hasVisibleRows = true;
                        totalVisible++;
                    }

                    // Hide details row if main row is hidden
                    const detailsRow = row.nextElementSibling;
                    if (detailsRow && detailsRow.id && detailsRow.id.startsWith('details_')) {
                        detailsRow.style.display = shouldShow ? '' : 'none';
                    }
                });

                section.style.display = hasVisibleRows ? '' : 'none';
            });

            updateSearchStatus(searchTerm ? `Found ${totalVisible} result(s)` : '');
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            performSearch();
            updateSearchStatus('Search cleared');
        }

        function updateSearchStatus(message) {
            let statusDiv = document.getElementById('searchStatus');
            if (!statusDiv) {
                statusDiv = document.createElement('div');
                statusDiv.id = 'searchStatus';
                statusDiv.style.cssText = 'text-align: center; padding: 10px; color: #7c3aed; font-size: 14px;';
                document.querySelector('.search-section').appendChild(statusDiv);
            }
            statusDiv.textContent = message;
            if (message) {
                setTimeout(() => { statusDiv.textContent = ''; }, 2000);
            }
        }
        
        // Enhanced keyboard support
        document.getElementById('searchInput').addEventListener('keyup', function(event) {
            const currentTime = Date.now();

            if (event.key === 'Enter') {
                if (this.value === '' && currentTime - lastEnterTime < 500) {
                    // Double-Enter on empty field clears any filters
                    clearSearch();
                    lastEnterTime = 0;
                } else {
                    performSearch();
                    lastEnterTime = currentTime;
                }
            } else if (event.key === 'Escape') {
                clearSearch();
            }
        });

        // Real-time search as you type
        document.getElementById('searchInput').addEventListener('input', function() {
            performSearch();
        });

        // Clear on double-click
        document.getElementById('searchInput').addEventListener('dblclick', function() {
            clearSearch();
        });

        // Cloud URLs will be injected here after upload
        window.reportCloudUrls = {};

        // Share functionality
        function shareReport() {
            console.log('Share button clicked!'); // Debug log

            const modal = document.getElementById('shareModal');
            const urlInput = document.getElementById('shareUrl');

            if (!modal) {
                console.error('Share modal not found!');
                alert('Error: Share modal not found. Please refresh the page.');
                return;
            }

            if (!urlInput) {
                console.error('Share URL input not found!');
                alert('Error: Share URL input not found. Please refresh the page.');
                return;
            }

            // Get the current page URL (or use the cloud URL if available)
            let shareUrl = window.location.href;

            // Check if we have cloud URLs stored in the page
            const cloudUrls = window.reportCloudUrls || {};
            console.log('Available cloud URLs:', cloudUrls); // Debug log

            // Prefer GitHub Pages, then Gist, then regular preview, then transfer.sh, then local
            if (cloudUrls.github_repo && cloudUrls.github_repo.github_pages_url) {
                shareUrl = cloudUrls.github_repo.github_pages_url;
                console.log('Using GitHub Pages URL (best option)');
            } else if (cloudUrls.github_gist && cloudUrls.github_gist.preview_url) {
                shareUrl = cloudUrls.github_gist.preview_url;
                console.log('Using GitHub gist preview URL');
            } else if (cloudUrls.github_repo && cloudUrls.github_repo.preview_url) {
                shareUrl = cloudUrls.github_repo.preview_url;
                console.log('Using GitHub repo preview URL (limited JavaScript)');
            } else if (cloudUrls.transfer_sh) {
                shareUrl = cloudUrls.transfer_sh;
                console.log('Using transfer.sh URL');
            } else {
                console.log('Using local file URL');
            }

            urlInput.value = shareUrl;

            // Also populate the backup URL (HTML Preview)
            const backupUrlInput = document.getElementById('shareUrlBackup');
            if (backupUrlInput) {
                let backupUrl = '';
                if (cloudUrls.github_repo && cloudUrls.github_repo.preview_url) {
                    backupUrl = cloudUrls.github_repo.preview_url;
                } else if (cloudUrls.github_gist && cloudUrls.github_gist.preview_url) {
                    backupUrl = cloudUrls.github_gist.preview_url;
                } else {
                    // Fallback: construct htmlpreview URL from current location
                    const currentUrl = window.location.href;
                    if (currentUrl.includes('github.io')) {
                        // Convert GitHub Pages URL to htmlpreview URL
                        const rawUrl = currentUrl.replace('abhishub-12.github.io/RCA-REPORTS/', 'raw.githubusercontent.com/AbhisHub-12/RCA-REPORTS/main/');
                        backupUrl = 'https://htmlpreview.github.io/?' + rawUrl;
                    } else {
                        backupUrl = 'HTML Preview not available for local files';
                    }
                }
                backupUrlInput.value = backupUrl;

                // Hide backup section if not available
                const backupSection = document.getElementById('backupSection');
                if (backupSection) {
                    if (backupUrl === 'HTML Preview not available for local files') {
                        backupSection.style.display = 'none';
                    } else {
                        backupSection.style.display = 'block';
                    }
                }
            }

            modal.style.display = 'block';
            console.log('Modal should now be visible'); // Debug log
        }

        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
            document.getElementById('copySuccess').style.display = 'none';
        }

        function copyShareLink() {
            const urlInput = document.getElementById('shareUrl');
            const copySuccess = document.getElementById('copySuccess');

            // Select and copy the text
            urlInput.select();
            urlInput.setSelectionRange(0, 99999); // For mobile devices

            try {
                document.execCommand('copy');
                copySuccess.style.display = 'block';

                // Hide success message after 3 seconds
                setTimeout(() => {
                    copySuccess.style.display = 'none';
                }, 3000);
            } catch (err) {
                // Fallback for modern browsers
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(urlInput.value).then(() => {
                        copySuccess.style.display = 'block';
                        setTimeout(() => {
                            copySuccess.style.display = 'none';
                        }, 3000);
                    });
                }
            }
        }

        function shareViaEmail() {
            const url = document.getElementById('shareUrl').value;
            const subject = encodeURIComponent('RCA Report - ' + document.title);
            const body = encodeURIComponent('Here is the RCA report:\n\n' + url);
            window.location.href = 'mailto:?subject=' + subject + '&body=' + body;
        }

        function shareViaSlack() {
            const url = document.getElementById('shareUrl').value;
            const text = encodeURIComponent('RCA Report: ' + url);
            // Open Slack's share URL (user needs to be logged in)
            window.open('https://slack.com/intl/en-in/share?url=' + encodeURIComponent(url), '_blank');
        }

        function shareViaTeams() {
            const url = document.getElementById('shareUrl').value;
            const text = encodeURIComponent('Check out this RCA Report');
            // Open Teams share dialog
            window.open('https://teams.microsoft.com/share?href=' + encodeURIComponent(url) + '&text=' + text, '_blank');
        }

        function shareViaWhatsApp() {
            const url = document.getElementById('shareUrl').value;
            const text = encodeURIComponent('RCA Report: ' + url);
            // Open WhatsApp with pre-filled message
            window.open('https://wa.me/?text=' + text, '_blank');
        }

        function copyBackupLink() {
            const backupUrlInput = document.getElementById('shareUrlBackup');
            // Select and copy the text
            backupUrlInput.select();
            backupUrlInput.setSelectionRange(0, 99999); // For mobile devices
            try {
                document.execCommand('copy');
                // Show temporary success indicator
                const button = document.getElementById('copyBackupLinkBtn');
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copied!';
                button.style.background = '#10b981';
                // Reset after 2 seconds
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.background = '#059669';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy backup link: ', err);
                alert('Failed to copy to clipboard. Please copy manually.');
            }
        }

        // Image Viewer Functions
        function openImageViewer(imageUrl, imageTitle) {
            const modal = document.getElementById('imageViewerModal');
            const image = document.getElementById('imageViewerImage');
            const title = document.getElementById('imageViewerTitle');

            image.src = imageUrl;
            image.alt = imageTitle;
            title.textContent = imageTitle;
            modal.style.display = 'block';

            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
        }

        function closeImageViewer() {
            const modal = document.getElementById('imageViewerModal');
            modal.style.display = 'none';

            // Restore body scroll
            document.body.style.overflow = 'auto';
        }

        // Close image viewer with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageViewer();
            }
        });

        // Close modal when clicking outside
        document.getElementById('shareModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeShareModal();
            }
        });

        // Add keyboard shortcut for share (Ctrl+Shift+S)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'S') {
                e.preventDefault();
                shareReport();
            }
        });

        // Enhanced debugging for GitHub Pages
        console.log('üîß SCRIPT LOADING: JavaScript file started');
        console.log('üåê ENVIRONMENT:', window.location.href);
        console.log('üìç USER AGENT:', navigator.userAgent);

        // Check for Content Security Policy issues
        if (typeof window.CSP !== 'undefined') {
            console.log('‚ö†Ô∏è CSP DETECTED:', window.CSP);
        }

        // Validate all functions are loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM Content Loaded');
            console.log('‚úÖ ShareReport function:', typeof shareReport);
            console.log('‚úÖ ToggleDetails function:', typeof toggleDetails);
            console.log('‚úÖ Share modal element:', document.getElementById('shareModal') ? 'Found' : 'Not Found');
            console.log('‚úÖ Cloud URLs:', window.reportCloudUrls);

            // Test basic DOM manipulation
            try {
                const testElement = document.querySelector('.expandable');
                if (testElement) {
                    console.log('‚úÖ EXPANDABLE ELEMENTS FOUND:', document.querySelectorAll('.expandable').length);
                } else {
                    console.log('‚ùå NO EXPANDABLE ELEMENTS FOUND');
                }
            } catch (error) {
                console.error('‚ùå DOM QUERY ERROR:', error);
            }

            // Test event listener attachment
            try {
                const shareBtn = document.getElementById('shareReportBtn');
                if (shareBtn) {
                    console.log('‚úÖ SHARE BUTTON FOUND, ATTACHING LISTENERS');
                } else {
                    console.log('‚ùå SHARE BUTTON NOT FOUND');
                }
            } catch (error) {
                console.error('‚ùå EVENT LISTENER ERROR:', error);
            }

            // Add event listeners for ticket expansion (GitHub Pages compatible)
            document.querySelectorAll('.expandable').forEach(row => {
                row.addEventListener('click', function() {
                    const ticketId = this.getAttribute('data-ticket-id');
                    if (ticketId) {
                        toggleDetails(ticketId);
                    }
                });
            });

            // Add event listener for share button (GitHub Pages compatible)
            const shareBtn = document.getElementById('shareReportBtn');
            if (shareBtn) {
                shareBtn.addEventListener('click', function() {
                    console.log('Share button clicked via event listener!');
                    shareReport();
                });
            }

            // Add event listener for print button (GitHub Pages compatible)
            const printBtn = document.getElementById('printBtn');
            if (printBtn) {
                printBtn.addEventListener('click', function() {
                    window.print();
                });
            }

            // Add event listeners for modal buttons (GitHub Pages compatible)
            const closeModalBtn = document.getElementById('closeModalBtn');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeShareModal);
            }

            const copyLinkBtn = document.getElementById('copyLinkBtn');
            if (copyLinkBtn) {
                copyLinkBtn.addEventListener('click', copyShareLink);
            }

            const copyBackupLinkBtn = document.getElementById('copyBackupLinkBtn');
            if (copyBackupLinkBtn) {
                copyBackupLinkBtn.addEventListener('click', copyBackupLink);
            }

            const shareEmailBtn = document.getElementById('shareEmailBtn');
            if (shareEmailBtn) {
                shareEmailBtn.addEventListener('click', shareViaEmail);
            }

            const shareSlackBtn = document.getElementById('shareSlackBtn');
            if (shareSlackBtn) {
                shareSlackBtn.addEventListener('click', shareViaSlack);
            }

            const shareTeamsBtn = document.getElementById('shareTeamsBtn');
            if (shareTeamsBtn) {
                shareTeamsBtn.addEventListener('click', shareViaTeams);
            }

            const shareWhatsAppBtn = document.getElementById('shareWhatsAppBtn');
            if (shareWhatsAppBtn) {
                shareWhatsAppBtn.addEventListener('click', shareViaWhatsApp);
            }

            // Add event listeners for search buttons (GitHub Pages compatible)
            const searchBtn = document.getElementById('searchBtn');
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            }

            const clearBtn = document.getElementById('clearBtn');
            if (clearBtn) {
                clearBtn.addEventListener('click', clearSearch);
            }
        });
    </script>
</body>
</html>